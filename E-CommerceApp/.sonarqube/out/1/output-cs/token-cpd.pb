 

YC:\Dev\Projects\.NET Work\E-CommerceApp\E-Commerce.DataAcess\Data\ApplicationDbContext.cs
	namespace		 	

E_Commerce		
 
.		 
	DataAcess		 
.		 
Data		 #
{

 
public 

class  
ApplicationDbContext %
:& '
IdentityDbContext( 9
<9 :
	ECommUser: C
>C D
{ 
DbSet 
< 
Category 
> 

Categories "
{# $
get% (
;( )
set* -
;- .
}/ 0
DbSet 
< 
Product 
> 
Products 
{  !
get" %
;% &
set' *
;* +
}, -
DbSet 
< 
ImageStorage 
> 
Images "
{# $
get% (
;( )
set* -
;- .
}/ 0
public  
ApplicationDbContext #
(# $
DbContextOptions$ 4
<4 5 
ApplicationDbContext5 I
>I J
optionsK R
)R S
:T U
baseV Z
(Z [
options[ b
)b c
{ 	
} 	
} 
} «

bC:\Dev\Projects\.NET Work\E-CommerceApp\E-Commerce.DataAcess\Repository\IRepository\IRepository.cs
	namespace

 	

E_Commerce


 
.

 
	DataAcess

 
.

 

Repository

 )
.

) *
IRepository

* 5
{ 
public 

	interface 
IRepository  
<  !
T! "
>" #
where$ )
T* +
:, -
class. 3
{ 
public 
IEnumerable 
< 
T 
> 
GetAll $
($ %
)% &
;& '
public 
T 
Get 
( 

Expression 
<  
Func  $
<$ %
T% &
,& '
bool( ,
>, -
>- .
filter/ 5
)5 6
;6 7
public 
void 
Post 
( 
T 
obj 
) 
;  
public 
void 
Patch 
( 
T 
obj 
)  
;  !
public 
void 
Delete 
( 
T 
obj  
)  !
;! "
} 
} °
bC:\Dev\Projects\.NET Work\E-CommerceApp\E-Commerce.DataAcess\Repository\IRepository\IUnitOfWork.cs
	namespace 	

E_Commerce
 
. 
	DataAcess 
. 

Repository )
.) *
IRepository* 5
{ 
public 

	interface 
IUnitOfWork  
{ 
public 

Repository 
< 
Category "
>" #

Categories$ .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public		 

Repository		 
<		 
Product		 !
>		! "
Products		# +
{		, -
get		. 1
;		1 2
set		3 6
;		6 7
}		8 9
public

 

Repository

 
<

 
Rating

  
>

  !
Ratings

" )
{

* +
get

, /
;

/ 0
set

1 4
;

4 5
}

6 7
public 

Repository 
< 
Address !
>! "
	Addresses# ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 

Repository 
< 
IdentityUserRole *
<* +
string+ 1
>1 2
>2 3
	UserRoles4 =
{> ?
get@ C
;C D
setE H
;H I
}J K
void 
Save 
( 
) 
; 
} 
} ¡
UC:\Dev\Projects\.NET Work\E-CommerceApp\E-Commerce.DataAcess\Repository\Repository.cs
	namespace 	

E_Commerce
 
. 
	DataAcess 
. 

Repository )
{ 
public 

class 

Repository 
< 
T 
> 
:  
IRepository! ,
<, -
T- .
>. /
where0 5
T6 7
:8 9
class: ?
{ 
DbSet 
< 
T 
> 
_dbSet 
; 
private  
ApplicationDbContext $

_dbContext% /
;/ 0
public 

Repository 
(  
ApplicationDbContext .
	dbContext/ 8
)8 9
{ 	

_dbContext 
= 
	dbContext "
;" #
_dbSet 
= 

_dbContext 
.  
Set  #
<# $
T$ %
>% &
(& '
)' (
;( )
} 	
public 
IEnumerable 
< 
T 
> 
GetAll $
($ %
)% &
{ 	
return 
_dbSet 
. 
ToList  
(  !
)! "
;" #
} 	
public 
T 
? 
Get 
( 

Expression  
<  !
Func! %
<% &
T& '
,' (
bool) -
>- .
>. /
filter0 6
)6 7
{ 	
try 
{ 

IQueryable   
<   
T   
>   
query   #
=  $ %
_dbSet  & ,
;  , -
query!! 
.!! 
Where!! 
(!! 
filter!! "
)!!" #
;!!# $
return"" 
query"" 
."" 
FirstOrDefault"" +
(""+ ,
)"", -
;""- .
}## 
catch$$ 
($$ 
	Exception$$ 
)$$ 
{%% 
return'' 
null'' 
;'' 
}(( 
}++ 	
public-- 
void-- 
Delete-- 
(-- 
T-- 
obj--  
)--  !
{.. 	
_dbSet// 
.// 
Remove// 
(// 
obj// 
)// 
;// 
}00 	
public22 
void22 
Patch22 
(22 
T22 
obj22 
)22  
{33 	
_dbSet44 
.44 
Update44 
(44 
obj44 
)44 
;44 
}55 	
public77 
void77 
Post77 
(77 
T77 
obj77 
)77 
{88 	
_dbSet99 
.99 
Add99 
(99 
obj99 
)99 
;99 
}:: 	
}<< 
}== ¯
UC:\Dev\Projects\.NET Work\E-CommerceApp\E-Commerce.DataAcess\Repository\UnitOfWork.cs
	namespace 	

E_Commerce
 
. 
	DataAcess 
. 

Repository )
{ 
public 

class 

UnitOfWork 
: 
IUnitOfWork )
{ 
public 

Repository 
< 
Category "
>" #

Categories$ .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 

Repository 
< 
Product !
>! "
Products# +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 

Repository 
< 
Rating  
>  !
Ratings" )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 

Repository 
< 
Address !
>! "
	Addresses# ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 

Repository 
< 
ImageStorage &
>& '
Images( .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 

Repository 
< 
IdentityUserRole *
<* +
string+ 1
>1 2
>2 3
	UserRoles4 =
{> ?
get@ C
;C D
setE H
;H I
}J K
private  
ApplicationDbContext $

_dbContext% /
;/ 0
public 

UnitOfWork 
(  
ApplicationDbContext .
	dbContext/ 8
)8 9
{ 	

_dbContext 
= 
	dbContext "
;" #

Categories 
= 
new 

Repository '
<' (
Category( 0
>0 1
(1 2
	dbContext2 ;
); <
;< =
Products 
= 
new 

Repository %
<% &
Product& -
>- .
(. /
	dbContext/ 8
)8 9
;9 :
Ratings 
= 
new 

Repository $
<$ %
Rating% +
>+ ,
(, -
	dbContext- 6
)6 7
;7 8
	Addresses 
= 
new 

Repository &
<& '
Address' .
>. /
(/ 0
	dbContext0 9
)9 :
;: ;
Images   
=   
new   

Repository   #
<  # $
ImageStorage  $ 0
>  0 1
(  1 2
	dbContext  2 ;
)  ; <
;  < =
	UserRoles!! 
=!! 
new!! 

Repository!! &
<!!& '
IdentityUserRole!!' 7
<!!7 8
string!!8 >
>!!> ?
>!!? @
(!!@ A
	dbContext!!A J
)!!J K
;!!K L
}"" 	
public$$ 
void$$ 
Save$$ 
($$ 
)$$ 
{%% 	

_dbContext&& 
.&& 
SaveChanges&& "
(&&" #
)&&# $
;&&$ %
}'' 	
}(( 
})) 